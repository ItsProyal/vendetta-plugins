(function(f,u,l){"use strict";const m=[],p=u.findByName("RowManager"),d=u.findByStoreName("EmojiStore"),a=/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/;m.push(l.before("generate",p.prototype,function(s){let[o]=s;if(o.rowType!==1)return;let e=o.message.content;if(!e?.length)return;const r=e.match(a)?.index;if(r===void 0)return;const c=e.slice(r).trim().split(`
`);if(!c.every(function(n){return n.match(a)}))return;for(e=e.slice(0,r);e.indexOf("  ")!==-1;)e=e.replace("  ",` ${c.shift()} `);e=e.trim(),c.length&&(e+=` ${c.join(" ")}`);const t=o.message.embeds;for(let n=0;n<t.length;n++){const i=t[n];i.type==="image"&&i.url.match(a)&&t.splice(n--,1)}o.message.content=e,o.__realmoji=!0})),m.push(l.after("generate",p.prototype,function(s,o){let[e]=s;if(e.rowType!==1||e.__realmoji!==!0)return;const{content:r}=o.message;if(!Array.isArray(r))return;const c=r.every(function(t){return t.type==="link"&&t.target.match(a)||t.type==="text"&&t.content===" "});for(let t=0;t<r.length;t++){const n=r[t];if(n.type!=="link")continue;const i=n.target.match(a);if(!i)continue;const g=`${i[0]}?size=128`,h=new URL(n.target);let j=d.getCustomEmojiById(i[1])?.name??h?.searchParams.get("name")??"FakeNitroEmoji";r[t]={type:"customEmoji",id:i[1],alt:`${j}`,src:g.replace("gif","webp"),frozenSrc:g,jumboable:c}}}));const y=function(){return m.forEach(function(s){return s()})};return f.onUnload=y,f})({},vendetta.metro,vendetta.patcher);
